use v6;

use Template::Mojo;
use Crust::Request;

my $tmpl = Template::Mojo.new(q:heredoc/END/);
% my ($name) = @_;
Hello, <%= $name %>
END

sub app($env) {
    my $req = Crust::Request.new($env);
    my $content = $tmpl.render($req.query_paramerters<name> // 'unknown').encode('utf-8');
    return [200,
        [
                'Content-Type' => 'text/plain'
        ],
        [$content]
    ];
}

